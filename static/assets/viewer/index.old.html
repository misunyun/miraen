<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="css/index.css">
    <script src="js/jquery.min.js"></script>
    <script src="js/jquery-ui.min.js"></script>
    <script src="js/jquery.ui.touch-punch.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
</head>

<body>
    <h1>ğŸ“– ì— í‹°ì²˜ ë·°ì–´ ë¯¸ëŸ¬ë§ í…ŒìŠ¤íŠ¸</h1>
    <h2 class="">1. ì‚¬ìš©í•˜ì‹¤ <span class="red">IDë¥¼ ì…ë ¥</span>í•˜ì‹  í›„ ìˆ˜ì—…ë‚´ì˜ <span class="red">í˜ì´ì§€ë¥¼ ì„ íƒ</span>í•´ì£¼ì„¸ìš”.<br/>
        2. ë·°ì–´ í•˜ë‹¨ì˜ <span class="red">"ìˆ˜ì—… ì‹œì‘"</span> ë²„íŠ¼ì„ ëˆŒëŸ¬ ë“€ì–¼ ëª¨ë“œë¥¼ ì‹œì‘í•´ì£¼ì„¸ìš”.<br/>
        3. ëª¨ë°”ì¼ì—ì„œëŠ” <span class="red">ì»¨íŠ¸ë¡¤ ì—°ê²°</span> ë²„íŠ¼ì„ ì´ìš©í•˜ì—¬ ë“€ì–¼ ëª¨ë“œì™€ ì—°ê²°í•˜ê³  <span class="red">ë¦¬ëª¨íŠ¸ ì»¨íŠ¸ë¡¤</span> í•´ì£¼ì„¸ìš”.</h2>
    <h3>âœ” ID ì…ë ¥ í›„ í˜ì´ì§€ì„ íƒ</h3><div class="inputData"><input type="text" id="id" name="id" value="" placeholder="ID ì…ë ¥"></div>
    <br />
    <ul id="course_div">

    </ul>
</body>
<script>
    $(document).ready(function () {

        $.getJSON('data/page.json')
            .done(function (data) {
                console.log('data', data)

                var el = "";
                data.forEach(function (item, index) {
                    el += "<li>"
                    el += "<div>"
                    el += "<span>" + item.course_name + "</span>"
                    el += "</div>"
                    el += "<ul>"
                    item['pages'].forEach(function (subitem, index) {
                        el += "<li><a href=\"javascript:open_viewer_by_page_id('" + item.course_id + "','" + subitem.page_id + "')\">" + subitem.page_name + "</a></li>"
                    })
                    el += "</ul>"

                    el += "</li>"

                })

                $("#course_div").html(el)


            })
            .fail(function (e) {
                console.log('error', e)
            })

    })
    function open_viewer_by_page_id(course_id, page_id) {


        var id = $("#id").val();
        if (id == undefined || id == null || $.trim(id) == '') {
            alert('ID ë¥¼ ì…ë ¥í•˜ì„¸ìš”')
            return;
        }

        localStorage['id'] = id;



        //ëª¨ë°”ì•Œì¸ì§€ ì›¹ì¸ì§€ì— ë”°ë¼ ë‹¤ë¥¸ í˜ì´ì§€ë¡œ redirect
        var isMobile = false;
        var filter = "win16/win32/win64/mac/macintel";

        if (navigator.platform) {
            isMobile = filter.indexOf(navigator.platform.toLowerCase()) < 0;
        }


        if (isMobile) {
            location.href = "viewerM.html?courseId=" + course_id + "&pageId=" + page_id
        } else {
            location.href = "viewer.html?courseId=" + course_id + "&pageId=" + page_id
        }


    }


</script>

</html>